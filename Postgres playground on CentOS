Centos 7

sudo yum repolist enabled
sudo yum repolist disabled
sudo yum repolist --disable repo=pgdg-common
sudo yum repolist --enable repo=pgdg-common
sudo yum-config-manager --enable repository pgdg-common 
sudo yum-config-manager --disable repository pgdg-common
sudo yum-config-manager --disable pgdg-common


Install RPM:
sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
[centos@ip-172-31-91-216 ~]$ sudo yum install -y postgresql12-server
[centos@ip-172-31-91-216 ~]$ sudo /usr/pgsql-12/bin/postgresql-12-setup initdb
Initializing database ... OK
[centos@ip-172-31-91-216 ~]$ sudo systemctl enable postgresql-12
Created symlink from /etc/systemd/system/multi-user.target.wants/postgresql-12.service to /usr/lib/systemd/system/postgresql-12.service.
sudo systemctl start postgresql-12

On Primary Database:
postgres=# CREATE USER replica WITH REPLICATION PASSWORD 'replicapsql';
CREATE ROLE

pg_hba entry:
host  	replication  	replica   	*.*.*.*/32  	trust
host  	all  	replica   	*.*.*.*/32  	trust

PostgreSQL Parameter Configuration:
postgres=# ALTER SYSTEM set listen_addresses = '*';
ALTER SYSTEM
postgres=# ALTER SYSTEM set max_wal_senders= 10;;
ALTER SYSTEM
postgres=# ALTER SYSTEM set wal_level='replica';
ALTER SYSTEM
postgres=# ALTER SYSTEM set max_replication_slots=10;
ALTER SYSTEM
postgres=# ALTER SYSTEM set primary_conninfo = 'user=replica host=3.93.220.124 port=5432 sslmode=prefer sslcompression=1';
ALTER SYSTEM
postgres=# ALTER SYSTEM set primary_slot_name = 'repl_slot';
ALTER SYSTEM
postgres=# ALTER SYSTEM set archive_mode='on';
ALTER SYSTEM
postgres=# ALTER SYSTEM set archive_command='test ! -f /var/lib/pgsql/12/archive/%f && cp %p /var/lib/pgsql/12/archive/%f';
ALTER SYSTEM

[centos@ip-172-31-91-216 ~]$ sudo systemctl restart  postgresql-12.service

-bash-4.2$ cat /var/lib/pgsql/12/data/postgresql.auto.conf 
# Do not edit this file manually!
# It will be overwritten by the ALTER SYSTEM command.
listen_addresses = '*'
max_wal_senders = '10'
wal_level = 'replica'
max_replication_slots = '10'
primary_slot_name = 'repl_slot'
archive_command = 'test ! -f /var/lib/pgsql/12/archive/%f && cp %p /var/lib/pgsql/12/archive/%f'
archive_mode = 'off'
primary_conninfo = 'user=replica host=3.93.220.124 port=5432'

............

Error during installation: [CentOS 9]

Error: Failed to download metadata for repo 'pgdg-common': repomd.xml GPG signature verification error: Bad GPG signature
[ec2-user@ip-172-31-36-120 ~]$ cd /etc/yum.repos.d/
[ec2-user@ip-172-31-36-120 yum.repos.d]$ ls -l
total 24
-rw-r--r--. 1 root root 4245 Sep  6  2022 centos-addons.repo
-rw-r--r--. 1 root root 2600 Sep  6  2022 centos.repo
-rw-r--r--. 1 root root 9613 Aug 14 14:31 pgdg-redhat-all.repo

[ec2-user@ip-172-31-36-120 yum.repos.d]$ sudo mv pgdg-redhat-all.repo pgdg-redhat-all.repo.old
[ec2-user@ip-172-31-36-120 yum.repos.d]$ sudo yum update -y

sudo yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

[ec2-user@ip-172-31-36-120 bin]$ sudo /usr/pgsql-13/bin/postgresql-13-setup initdb
Initializing database ... OK

[ec2-user@ip-172-31-36-120 bin]$ sudo systemctl enable postgresql-13
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql-13.service â†’ /usr/lib/systemd/system/postgresql-13.service.
[ec2-user@ip-172-31-36-120 bin]$ sudo systemctl start postgresql-13

=========
Disable Repo:
[ec2-user@ip-172-31-80-131 ~]$ sudo yum --disablerepo=* -y install https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

=======
Error:
Errors during downloading metadata for repository 'pgdg-common':
  - Curl error (37): Couldn't read a file:// file for file:///etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL7 [Couldn't open file /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL7]
Error: Failed to retrieve GPG key for repo 'pgdg-common': Curl error (37): Couldn't read a file:// file for file:///etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL7 [Couldn't open file /etc/pki/rpm-gpg/PGDG-RPM-GPG-KEY-RHEL7]
